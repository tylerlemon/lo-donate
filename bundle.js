!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.DFSDonationForm=t():e.DFSDonationForm=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="./",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);let n={docLink:"Review the documentation to resolve this issue: https://tylerlemon.com",prefix:"dfs_",pages:["donate","tribute","ecard","billing","donor","payment"],duration:["once","monthly"],buttons:["back","next","submit"],modal:"<div class='modal fade' tabindex='-1' aria-hidden='true'><button type='button' class='btn-close btn' aria-label='Close'></button><div class='modal-dialog modal-xl'><div class='modal-content'><div class='row g-0'><div class='col'><div class='modal-banner'></div></div><div class='col-12 col-lg-7'><div class='modal-body'></div></div></div></div></div></div>",toast:"<div class='toast-container position-absolute p-3 bottom-0 end-0'><div class='toast fade' role='alert' aria-live='assertive' aria-atomic='true'><button type='button' class='btn-close btn' aria-label='Close'></button><div class='toast-body'><button class='toast-button btn btn-block text-start w-100'>Complete your <span id='donation_amount'></span> gift to make a difference.</button></div></div></div>"},o={url:"",apiKey:"",formId:"",primaryCountry:"Canada",locale:"en_CA",displayType:"modal",donationMinimum:5,levelSplit:[3,3],supportMonthly:!1,monthlyFirst:!0,supportTribute:!1,supportEcard:!1,stationaryId:"",supportDonor:!1,coverFee:!1,feeType:"percent",feeAmount:2,feeLabel:"I would like to help offset the transaction costs of my donation",pageTitles:["Donate","Tribute","eCard","Billing","Donor","Payment"],givingOptions:["Give once","Give monthly"],tributeLabel:"Give in honor or in memory",sameAsLabel:"Use for donor information",nextButton:"Continue",backButton:"Back",submitButton:"Process",thankYou:"<h3>Thank you!</h3><p>Thank you very much for your donation.</p><p>We are deeply grateful for your generosity and support of our efforts. Your gift has made a difference and enabled us to provide vital services to the community we serve. We count on you and people like you to ensure that we can continue providing these services.</p>",headline:"Donate Today",bodyText:"Support a great cause.",labels:{},target:"[data-dfs-target]",container:"[data-dfs-container]",reminder:!0},i=[{name:"form_id",label:"Form ID:",type:"hidden",page:"payment"},{name:"level_id",label:"Level ID:",type:"hidden",page:"donate"},{name:"additional_amount",label:"Additional Amount:",type:"hidden",page:"donate"},{name:"donor.email",label:"Email Address:",type:"text",page:"billing"},{name:"billing.name.title",label:"Title:",type:"select",page:"billing"},{name:"billing.name.first",label:"First Name:",type:"text",page:"billing"},{name:"billing.name.middle",label:"Middle Name:",type:"text",page:"billing"},{name:"billing.name.last",label:"Last name:",type:"text",page:"billing"},{name:"billing.name.suffix",label:"Suffix:",type:"select",page:"billing"},{name:"billing.address.street1",label:"Address:",type:"text",page:"billing"},{name:"billing.address.street2",label:"Address Line 2:",type:"text",page:"billing"},{name:"billing.address.street3",label:"Address Line 3:",type:"text",page:"billing"},{name:"billing.address.city",label:"City:",type:"text",page:"billing"},{name:"billing.address.county",label:"County:",type:"text",page:"billing"},{name:"billing.address.state",label:"State:",type:"select",page:"billing"},{name:"billing.address.zip",label:"Zip:",type:"text",page:"billing"},{name:"billing.address.country",label:"Country:",type:"select",page:"billing"},{name:"donor.name.title",label:"Title:",type:"select",page:"donor"},{name:"donor.name.first",label:"First Name:",type:"text",page:"donor"},{name:"donor.name.middle",label:"Middle Name:",type:"text",page:"donor"},{name:"donor.name.last",label:"Last name:",type:"text",page:"donor"},{name:"donor.name.suffix",label:"Suffix:",type:"select",page:"donor"},{name:"donor.address.street1",label:"Address:",type:"text",page:"donor"},{name:"donor.address.street2",label:"Address Line 2:",type:"text",page:"donor"},{name:"donor.address.county",label:"County:",type:"text",page:"donor"},{name:"donor.address.city",label:"City:",type:"text",page:"donor"},{name:"donor.address.state",label:"State:",type:"select",page:"donor"},{name:"donor.address.zip",label:"Zip:",type:"text",page:"donor"},{name:"donor.address.country",label:"Country:",type:"select",page:"donor"},{name:"donor.phone",label:"Phone Number:",type:"text",page:"donor"},{name:"donor.email_opt_in",label:"I would like to receive communication from this organization",type:"checkbox",page:"payment"},{name:"anonymous",label:"Keep my donation anonymous",type:"checkbox",page:"payment"},{name:"tribute.type",label:"Tribute type:",type:"radio",page:"tribute"},{name:"tribute.honoree.name.title",label:"Honoree Title:",type:"select",page:"tribute"},{name:"tribute.honoree.name.first",label:"Honoree First Name:",type:"text",page:"tribute"},{name:"tribute.honoree.name.last",label:"Honoree Last name:",type:"text",page:"tribute"},{name:"tribute.honoree.name.full",label:"Honoree Name:",type:"text",page:"tribute"},{name:"ecard.send",label:"Send an eCard",type:"checkbox",page:"tribute"},{name:"ecard.send_date",label:"Send Date:",type:"select",page:"ecard"},{name:"ecard.recipients",label:"Recipients:",type:"textarea",page:"ecard"},{name:"ecard.id",label:"Stationary:",type:"hidden",page:"ecard"},{name:"ecard.subject",label:"Subject:",type:"text",page:"ecard"},{name:"ecard.message",label:"Message:",type:"textarea",page:"ecard"},{name:"ecard.copy_sender",label:"Send me a copy",type:"checkbox",page:"ecard"}],l=[{id:"card_number",label:"Credit Card Number:",type:"text",maxlength:19},{id:"card_exp_date_month",label:"Expiration Month:",type:"text",placeholder:"MM",maxlength:2},{id:"card_exp_date_year",label:"Expiration Year:",type:"text",placeholder:"YYYY",maxlength:4},{id:"card_cvv",label:"CVV:",type:"text"}],r=[{name:"title",values:["Mr.","Ms.","Mrs.","Miss","Dr."]},{name:"suffix",values:["Sr.","Jr.","II","III","IV","V"]},{name:"state",values:[{value:"AK",text:"Alaska"},{value:"AL",text:"Alabama"},{value:"AR",text:"Arkansas"},{value:"AZ",text:"Arizona"},{value:"CA",text:"California"},{value:"CO",text:"Colorado"},{value:"CT",text:"Connecticut"},{value:"DC",text:"District of Columbia"},{value:"DE",text:"Delaware"},{value:"FL",text:"Florida"},{value:"GA",text:"Georgia"},{value:"HI",text:"Hawaii"},{value:"IA",text:"Iowa"},{value:"ID",text:"Idaho"},{value:"IL",text:"Illinois"},{value:"IN",text:"Indiana"},{value:"KS",text:"Kansas"},{value:"KY",text:"Kentucky"},{value:"LA",text:"Louisiana"},{value:"MA",text:"Massachusetts"},{value:"MD",text:"Maryland"},{value:"ME",text:"Maine"},{value:"MI",text:"Michigan"},{value:"MN",text:"Minnesota"},{value:"MO",text:"Missouri"},{value:"MS",text:"Mississippi"},{value:"MT",text:"Montana"},{value:"NC",text:"North Carolina"},{value:"ND",text:"North Dakota"},{value:"NE",text:"Nebraska"},{value:"NH",text:"New Hampshire"},{value:"NJ",text:"New Jersey"},{value:"NM",text:"New Mexico"},{value:"NV",text:"Nevada"},{value:"NY",text:"New York"},{value:"OH",text:"Ohio"},{value:"OK",text:"Oklahoma"},{value:"OR",text:"Oregon"},{value:"PA",text:"Pennsylvania"},{value:"RI",text:"Rhode Island"},{value:"SC",text:"South Carolina"},{value:"SD",text:"South Dakota"},{value:"TN",text:"Tennessee"},{value:"TX",text:"Texas"},{value:"UT",text:"Utah"},{value:"VA",text:"Virginia"},{value:"VT",text:"Vermont"},{value:"WA",text:"Washington"},{value:"WI",text:"Wisconsin"},{value:"WV",text:"West Virginia"},{value:"WY",text:"Wyoming"},{value:"AS",text:"American Samoa"},{value:"FM",text:"Federated States of Micronesia"},{value:"GU",text:"Guam"},{value:"MH",text:"Marshall Islands"},{value:"MP",text:"Northern Mariana Islands"},{value:"PR",text:"Puerto Rico"},{value:"PW",text:"Palau"},{value:"VI",text:"Virgin Islands"},{value:"AA",text:"Armed Forces Americas"},{value:"AE",text:"Armed Forces"},{value:"AP",text:"Armed Forces Pacific"}]},{name:"province",values:[{value:"AB",text:"Alberta"},{value:"BC",text:"British Columbia"},{value:"MB",text:"Manitoba"},{value:"NB",text:"New Brunswick"},{value:"NL",text:"Newfoundland and Labrador"},{value:"NS",text:"Nova Scotia"},{value:"NT",text:"Northwest Territories"},{value:"NU",text:"Nunavut"},{value:"ON",text:"Ontario"},{value:"PE",text:"Prince Edward Island"},{value:"QC",text:"Quebec"},{value:"SK",text:"Saskatchewan"},{value:"YT",text:"Yukon"}]},{name:"country",values:["Afghanistan","Aland Islands","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua and Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivarian Republic of Venezuela","Bonaire, Sint Eustatios and Saba","Bosnia and Herzegovina","Botswana","Bouvet Island","Brazil","British Indian Ocean Territory","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central African Republic","Chad","Chile","China","Christmas Island","Cocos (Keeling) Islands","Colombia","Comoros","Congo","Cook Islands","Costa Rica","Cote D'Ivoire","Croatia","Cuba","Curacao","Cyprus","Czech Republic","Democratic People's Republic of Korea","The Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands (Malvinas)","Faroe Islands","Federated States of Micronesia","Fiji","Finland","The Former Yugoslav Republic of Macedonia","France","French Guiana","French Polynesia","French Southern Territories","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guernsey","Guinea","Guinea-Bissau","Guyana","Haiti","Heard Island and McDonald Islands","Holy See (Vatican City State)","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iraq","Ireland","Islamic Republic of Iran","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Lao People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Palestinian Territory, Occupied","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn","Plurinational State of Bolivia","Poland","Portugal","Puerto Rico","Qatar","Republic of Korea","Republic of Moldova","Reunion","Romania","Russian Federation","Rwanda","Saint Barthelemy","Saint Helena, Ascension and Tristan da Cunha","Saint Kitts and Nevis","Saint Lucia","Saint Martin (French)","Saint Pierre and Miquelon","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","S. Georgia &amp; S. Sandwich Isls.","Sierra Leone","Singapore","Sint Maarten (Dutch)","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Svalbard and Jan Mayen","Swaziland","Sweden","Switzerland","Syrian Arab Republic","Taiwan, Province of China","Tajikistan","Thailand","Timor-Leste","Togo","Tokelau","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Turks and Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United Republic of Tanzania","United States","Uruguay","USA Minor Outlying Islands","Uzbekistan","Vanuatu","Viet Nam","Virgin Islands (British)","Virgin Islands (USA)","Wallis and Futuna","Western Sahara","Yemen","Zambia","Zimbabwe"]},{name:"tribute",values:[{value:"memory",text:"In memory"},{value:"honor",text:"In honour"}]},{name:"ecard.send_date",values:["select"]}],s=[{name:"months",values:[{name:"January",days:"31",value:"01"},{name:"February",days:"28",value:"02"},{name:"March",days:"31",value:"03"},{name:"April",days:"30",value:"04"},{name:"May",days:"31",value:"05"},{name:"June",days:"30",value:"06"},{name:"July",days:"31",value:"07"},{name:"August",days:"31",value:"08"},{name:"September",days:"30",value:"09"},{name:"October",days:"31",value:"10"},{name:"November",days:"30",value:"11"},{name:"December",days:"31",value:"12"}]},{name:"days",values:["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]}];class d{getPaymentGroups(e){return l.map(t=>{let a=t.label,n=t.id;e.labels[n]&&(a=e.labels[n]);let o=document.createElement("div");o.classList.add("form-group","is-required");let i="",l="";return t.placeholder&&(i=t.placeholder),t.maxlength&&(l=t.maxlength),o.innerHTML="<label class='form-label' for='"+n+"'>"+a+"</label><input id='"+n+"' name='"+n+"' type='text' class='form-control' placeholder='"+i+"' maxlength='"+l+"'>",o})}getOption(e,t,a){let n=document.createElement("option");return"object"==typeof t?(n.value=t.value,n.innerText=t.text):(n.value=t,n.innerText=t,"billing.address.country"===a&&t.toLowerCase()===e.primaryCountry.toLowerCase()&&(n.selected=!0)),n}getSelectOptions(e,t){let a=[];if(t.indexOf("title")>-1){let e=r.filter(e=>"title"===e.name);a.push(e[0].values)}if(t.indexOf("suffix")>-1){let e=r.filter(e=>"suffix"===e.name);a.push(e[0].values)}if(t.indexOf("state")>-1){let t=r.filter(e=>"state"===e.name),n=r.filter(e=>"province"===e.name),o=[];"canada"==e.primaryCountry.toLowerCase()?(o=n[0].values.concat(t[0].values).concat([{value:"None",text:"None"}]),a.push(o)):(o=t[0].values.concat(n[0].values).concat([{value:"None",text:"None"}]),a.push(o))}if(t.indexOf("country")>-1){let e=r.filter(e=>"country"===e.name);a.push(e[0].values)}if(void 0!==a[0]){return a[0].map(a=>this.getOption(e,a,t))}console.error("No options available for "+t)}getDateOptions(){var e=new Date,t=e.getFullYear();return[s.filter(e=>"months"===e.name)[0].values.map(t=>{let a=document.createElement("option");return a.value=t.value,a.value===("0"+(e.getMonth()+1)).slice(-2)&&(a.selected=!0),a.innerText=t.name,a.setAttribute("data-days",t.days),a}),s.filter(e=>"days"===e.name)[0].values.map(t=>{let a=document.createElement("option");return a.value=t,a.value===("0"+e.getDate()).slice(-2)&&(a.selected=!0),a.innerText=t,a}),[t,t+1].map(e=>{let t=document.createElement("option");return t.value=e,t.innerText=e,t})]}getRadio(e,t){let a=document.createElement("div");a.classList.add("form-check","form-check-inline");let n=t.replace(/\./g,"_");return a.innerHTML="<input id='"+n+"_"+e.value+"' name='"+t+"' type='radio' class='form-check-input'><label for='"+n+"_"+e.value+"' class='form-check-label'>"+e.text+"</label></div>",a}getRadioOptions(e){let t=[];if(e.indexOf("tribute")>-1){let e=r.filter(e=>"tribute"===e.name);t.push(e[0].values)}if(void 0!==t[0]){return t[0].map(t=>this.getRadio(t,e))}console.error("No options available for "+e)}getFieldGroup(e,t){let a=i.filter(e=>e.name===t.elementName);if(a.length>0){let o="is-required";"true"!==t.required&&(o="is-optional");let i=a[0].label,l=t.elementName.replace(/\./g,"_");e.labels[l]&&(i=e.labels[l]);let r=document.createElement("div");switch(r.setAttribute("data-parent",a[0].page),r.classList.add("form-group",o),a[0].type){case"text":r.innerHTML="<label class='form-label' for='"+l+"'>"+i+"</label><input id='"+l+"' name='"+t.elementName+"' type='"+a[0].type+"' class='form-control'>";break;case"textarea":r.innerHTML="<label class='form-label' for='"+l+"'>"+i+"</label><textarea id='"+l+"' name='"+t.elementName+"' type='"+a[0].type+"' class='form-control'></textarea>";break;case"select":if("ecard.send_date"===t.elementName){r.innerHTML="<label class='form-label' for='"+l+"'>"+i+"</label><div class='row'><div class='col'><select aria-label='Select month' id='"+l+"_month' type='"+a[0].type+"' class='form-select'></select></div><div class='col'><select aria-label='Select day' id='"+l+"_day' type='"+a[0].type+"' class='form-select'></select></div><div class='col'><select aria-label='Select year' id='"+l+"_year' type='"+a[0].type+"' class='form-select'></select></div><input id='"+l+"' name='"+t.elementName+"' type='hidden'></div>";let e=this.getDateOptions();document.createElement("option").value="",r.querySelectorAll("select").forEach((t,a)=>{for(let n of e[a])t.append(n)})}else{r.innerHTML="<label class='form-label' for='"+l+"'>"+i+"</label><select id='"+l+"' name='"+t.elementName+"' type='"+a[0].type+"' class='form-select'></select>";let n=this.getSelectOptions(e,t.elementName);if(void 0!==n){let e=document.createElement("option");e.value="",r.childNodes[1].append(e);for(let e of n)r.childNodes[1].append(e)}}break;case"checkbox":r.innerHTML="<div class='form-check'><input id='"+l+"' name='"+t.elementName+"' type='"+a[0].type+"' class='form-check-input'><label for='"+l+"' class='form-check-label'>"+i+"</label></div>";break;case"radio":{let e=this.getRadioOptions(t.elementName);if(void 0!==e)for(let t of e)r.append(t);break}case"hidden":if("additional_amount"===t.elementName)if(!e.coverFee||"percent"!==e.feeType&&"dollar"!==e.feeType)e.coverFee||console.warn("Configuration mismatch: Cover fee has not been activated. -> "+n.docLink+"#setup");else{let o="";"percent"===e.feeType?o=e.feeAmount+"%":"dollar"===e.feeType?o="$"+e.feeAmount+".00":console.error("A valid cover fee type has not been set. -> "+n.docLink+"#setup"),r.innerHTML="<div class='form-check'><input id='cover_fee' type='checkbox' class='form-check-input'><label for='cover_fee' class='form-check-label'>"+e.feeLabel+" ("+o+")</label></div>",r.innerHTML+="<input id='"+l+"' name='"+t.elementName+"' type='"+a[0].type+"' class='' aria-label='"+i+"'>"}else r.classList.add("form-hidden"),r.innerHTML="<input id='"+l+"' name='"+t.elementName+"' type='"+a[0].type+"' class=''><label for='"+l+"'>"+i+"</label>"}return r}console.error(t.elementName+" is not supported.")}getLevelGroup(e,t,a,o){let i=document.createElement("div");Number(t.amount.decimal)<e.donationMinimum&&console.warn("Form contains a gift amount less than the donation minimum."),"true"==t.userSpecified?i.innerHTML="<div class='user-amount'><input type='radio' class='d-none' name='level_id' id='donation_amount_user_"+t.level_id+"' value='"+t.level_id+"'><label class='btn btn-lg w-100' for='donation_amount_user_"+t.level_id+"'>Other</label><div class='form-group donation-level-user-entered'><input type='text' class='form-control form-control-lg' name='other_amount' id='donation_amount_"+t.level_id+"'></div></div>":i.innerHTML="<input type='radio' class='d-none' name='level_id' id='donation_amount_"+t.level_id+"' value='"+t.level_id+"' data-amount='"+t.amount.decimal+"'><label class='btn btn-lg w-100' for='donation_amount_"+t.level_id+"'>"+t.amount.formatted+"</label>";let l=e.levelSplit,r=12;if(e.supportMonthly){if(l.length>1){let t=0;a>=l[0]&&(t=1),l[t]<5?(r=12/l[t],l[t]%2==0?i.classList.add("col-"+2*r,"col-md-"+r):i.classList.add("col-12","col-md-"+r)):l[t]%2==0?i.classList.add("col-"+2*r,"col-md-"+r):l[t]%2==0?i.classList.add("col-12","col-md"):a===l[t]-1?i.classList.add("col-12"):i.classList.add("col-12","col-md"),i.setAttribute("data-duration",n.duration[t]),e.monthlyFirst&&0===t?i.style.display="none":e.monthlyFirst||1!==t||(i.style.display="none")}}else o<5?(r=12/o,o%2==0?i.classList.add("col-"+2*r,"col-md-"+r):i.classList.add("col-12","col-md-"+r)):o%2==0?i.classList.add("col-"+2*r,"col-md-"+r):o%2==0?i.classList.add("col-12","col-md"):a===o-1?i.classList.add("col-12"):i.classList.add("col-12","col-md");return i.classList.add("mb-3"),i}}let c={email:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[ [0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,postalCode:/[a-zA-Z][0-9][a-zA-Z](-| |)[0-9][a-zA-Z][0-9]/,zipCode:/^[0-9]{5}(?:-[0-9]{4})?$/,creditCard:/(?<AMEX>3[47]\d\d[\s-]?(?!(\d)\2{5}|123456|234567|345678)\d{6}[\s-]?(?!(\d)[\s-]{4}|12345|56789)\d{5})|(?<MASTERCARD>5[1-5]\d{2}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4})|(?<VISA>4\d{3}[\s-]?(?:\d{4}[\s-]?){2}\d(?:\d{3})?)|(?<DISCOVER>6(?:011|22?=[\s-]?[6-9]|[3-9]|[2-8]|9[\s-]?[01]|2[0-5]|4[4-9]\d|5\d\d)[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4})/},u={connection:"We are currently experiencing an issue. Please contact us by phone or email to make a donation.",submit:"We are unable to complete your donation at this time. Please contact us by phone or email to make a donation."},m="Please fill all required fields",p="Please select or enter a donation amount of at least",y="Please select a tribute type",f={invalidDate:"Please select a valid date",pastDate:"Please select a date in the future"},v="Please enter a valid email address",b="Please enter a valid postal code",g="Please enter a valid zip code",h={number:"Please enter a valid credit card number",month:"Please enter a two digit expiry month",year:"Please enter a four digit expiry year"};class _{changeLevels(e){let t=e.target.value;document.querySelectorAll("#levels > div[data-duration='"+t+"']").forEach(e=>e.style.display="block"),document.querySelectorAll("#levels > div:not([data-duration='"+t+"'])").forEach(e=>e.style.display="none")}otherAmount(e){let t=e.target;if(t.id.indexOf("user_")>-1){let e=t.value;document.getElementById("donation_amount_"+e).focus()}else document.querySelectorAll("[name='other_amount']").forEach(e=>{e.value=""})}coverFee(e){let t=0,a=0;if(document.querySelector("[id^='donation_amount_user_']:checked")){let e=document.querySelector("[id^='donation_amount_user_']:checked");t=Number(document.querySelector("#donation_amount_"+e.value).value.replace(/[^0-9.-]+/g,""))}else t=Number(document.querySelector("[name='level_id']:checked").dataset.amount.replace(/[^0-9.-]+/g,""));document.getElementById("cover_fee").checked&&("percent"===e.feeType?a=e.feeAmount/100*t:"dollar"===e.feeType&&(a=e.feeAmount)),document.getElementById("additional_amount").value=a,document.getElementById("submitButton").innerHTML=e.submitButton+" - $"+(t+a).toFixed(2)}prevStep(e){e.preventDefault();let t=document.querySelector("[data-step].active"),a=t.dataset.step,n=t.previousSibling.dataset.step;"billing"===a&&(document.getElementById("tribute_bool")&&!document.getElementById("tribute_bool").checked?n="donate":document.getElementById("tribute_bool")&&document.getElementById("tribute_bool").checked&&document.getElementById("ecard_send")&&!document.getElementById("ecard_send").checked&&(n="tribute")),"payment"===a&&(n=document.getElementById("same_as_bool")&&document.getElementById("same_as_bool").checked?"donor":"billing"),t.classList.add("page-hidden"),t.classList.remove("active"),document.querySelector("div[id$='_error_container']").innerHTML="",document.querySelector("div[id$='_error_container']").style.display="none",document.querySelector("form[id$='_donation_form']").style.height=document.querySelector("[data-step='"+n+"']").offsetHeight+document.querySelector("div[id$='_button_container']").offsetHeight+30+"px",document.querySelector("[data-step='"+n+"']").classList.add("active"),document.querySelector("[data-step='"+n+"']").classList.remove("page-hidden","prev")}nextStep(e,t){if("payment"===(e=e.dataset.step))this.submitForm(t);else{let a=document.querySelector(".page.active").nextSibling.dataset.step;if("donate"===e&&document.getElementById("cover_fee")&&this.coverFee(t),"donate"===e&&document.getElementById("tribute_bool")&&!document.getElementById("tribute_bool").checked&&(a="billing"),"tribute"===e&&document.getElementById("ecard_send")&&!document.getElementById("ecard_send").checked&&(a="billing"),"billing"===e&&(document.getElementById("same_as_bool")&&document.getElementById("same_as_bool").checked&&e.querySelectorAll(".form-control, .form-select").forEach(e=>{document.getElementById(e.id.replace("billing_","donor_"))&&(document.getElementById(e.id.replace("billing_","donor_")).value=e.value)}),document.getElementById("same_as_bool")&&!document.getElementById("same_as_bool").checked)){document.querySelector("[id$='_donor'][data-step]").querySelectorAll(".form-control, .form-select").forEach(e=>{e.value=""})}document.querySelector("[data-step].active").classList.add("page-hidden","prev"),document.querySelector("[data-step].active").classList.remove("active"),document.querySelector("form[id$='_donation_form']").style.height=document.querySelector("[data-step='"+a+"']").offsetHeight+document.querySelector("div[id$='_button_container']").offsetHeight+30+"px",document.querySelector("[data-step='"+a+"']").classList.add("active"),document.querySelector("[data-step='"+a+"']").classList.remove("page-hidden")}}async submitForm(e){let t=document.querySelector("form[id$='_donation_form']");t.querySelector("#submitButton").setAttribute("disabled","disabled");let a={},n=new FormData(t);document.querySelectorAll("[name='other_amount']").forEach(e=>{""!==e.value&&n.set("other_amount",e.value.replace(/[^0-9.-]+/g,""))});for(let e of n.keys())a[e]=n.get(e);document.getElementById("dfs__modal")&&(document.getElementById("dfs__modal").querySelector(".modal-banner").classList.add("full"),document.getElementById("dfs__modal").querySelector(".modal-body").classList.add("closed"));let o=await async function(e,t){let a={method:"donate",api_key:t.apiKey,v:"1.0",response_format:"json",form_id:t.formId,validate:!1};!1===t.url.endsWith("/")&&(t.url=t.url+"/");let n={...a,...e};const o=await fetch(t.url+"CRDonationAPI",{method:"POST",body:new URLSearchParams(n)});if(o.ok)return!0;{let e=await o.json();return"fieldError"in e.donationResponse.errors?e.donationResponse.errors.fieldError:"pageError"in e.donationResponse.errors&&e.donationResponse.errors.pageError}}(a,e);if(!0===o)if(document.getElementById("dfs__modal")){document.getElementById("dfs__modal").querySelector(".modal-banner").innerHTML=e.thankYou}else{t.innerHTML="";let a=document.createElement("div");a.innerHTML=e.thankYou,t.append(a)}else document.querySelector("[id$='_error_container']").innerHTML=o,document.querySelector("[id$='_error_container']").style.display="block",document.getElementById("dfs__modal")&&(document.getElementById("dfs__modal").querySelector(".modal-banner").classList.remove("full"),document.getElementById("dfs__modal").querySelector(".modal-body").classList.remove("closed")),t.querySelector("#submitButton").removeAttribute("disabled")}validateStep(e,t){e.preventDefault();let a=document.querySelector(".page.active"),n=a.id,o=document.querySelector("[id$='_error_container']"),i=0;if(a.querySelectorAll(".is-required").forEach(e=>{e.querySelector(".form-control, .form-select")&&(""===e.querySelector(".form-control, .form-select").value?(e.querySelector(".form-control, .form-select").classList.add("is-invalid"),o.innerHTML=m,i++):e.querySelector(".form-control, .form-select").classList.remove("is-invalid"))}),0===i){if(n.indexOf("_donate")>-1)if(document.querySelector("[name='level_id']:checked")){if(document.querySelector("[id^='donation_amount_user_']:checked")){let e=document.querySelector("[id^='donation_amount_user_']:checked");document.querySelector("#donation_amount_"+e.value).value.replace(/[^0-9.-]+/g,"")<t.donationMinimum?(document.querySelector("#donation_amount_"+e.value).classList.add("is-invalid"),o.innerHTML=p+" $"+t.donationMinimum.toFixed(2),i++):document.querySelector("#donation_amount_"+e.value).classList.remove("is-invalid")}}else o.innerHTML=p+" $"+t.donationMinimum.toFixed(2),i++;if(n.indexOf("_tribute")>-1&&(document.querySelector("[name='tribute.type']:checked")||(o.innerHTML=y,i++)),n.indexOf("_ecard")>-1){let e=new Date,t=new Date(document.getElementById("ecard_send_date").value+"T00:00:00");e=e.setHours(0,0,0,0),t=t.setHours(0,0,0,0);let a=document.getElementById("ecard_send_date_month"),n=document.getElementById("ecard_send_date_day"),l=document.getElementById("ecard_send_date_year");isNaN(t)?(a.classList.add("is-invalid"),n.classList.add("is-invalid"),l.classList.add("is-invalid"),o.innerHTML=f.invalidDate,i++):t<e?(a.classList.add("is-invalid"),n.classList.add("is-invalid"),l.classList.add("is-invalid"),o.innerHTML=f.pastDate,i++):(a.classList.remove("is-invalid"),n.classList.remove("is-invalid"),l.classList.remove("is-invalid"))}if(n.indexOf("_billing")>-1){let e=document.getElementById("donor_email"),t=document.getElementById("billing_address_zip");!1===c.email.test(String(e.value).toLowerCase())?(e.classList.add("is-invalid"),o.innerHTML=v,i++):e.classList.remove("is-invalid"),"Canada"==document.getElementById("billing_address_country").value&&!1===c.postalCode.test(String(t.value).toLowerCase())?(t.classList.add("is-invalid"),o.innerHTML=b,i++):"United States"==document.getElementById("billing_address_country").value&&!1===c.zipCode.test(String(t.value).toLowerCase())?(t.classList.add("is-invalid"),o.innerHTML=g,i++):t.classList.remove("is-invalid")}if(n.indexOf("_donor")>-1){let e=document.getElementById("donor_address_zip");"Canada"==document.getElementById("donor_address_country").value&&!1===c.postalCode.test(String(e.value).toLowerCase())?(e.classList.add("is-invalid"),o.innerHTML=b,i++):"United States"==document.getElementById("donor_address_country").value&&!1===c.zipCode.test(String(e.value).toLowerCase())?(e.classList.add("is-invalid"),o.innerHTML=g,i++):e.classList.remove("is-invalid")}if(n.indexOf("_payment")>-1){let e=document.getElementById("card_number"),t=document.getElementById("card_exp_date_month"),a=document.getElementById("card_exp_date_year");!1===c.creditCard.test(String(e.value).toLowerCase())?(e.classList.add("is-invalid"),o.innerHTML=h.number,i++):e.classList.remove("is-invalid"),2!=t.value.replace(/\D/g,"").length?(t.classList.add("is-invalid"),o.innerHTML=h.month,i++):t.classList.remove("is-invalid"),4!=a.value.replace(/\D/g,"").length?(a.classList.add("is-invalid"),o.innerHTML=h.year,i++):a.classList.remove("is-invalid")}}0===i?(o.innerHTML="",o.style.display="none",this.nextStep(a,t)):("block"!==o.style.display&&(document.querySelector("form[id$='_donation_form']").style.height=document.querySelector("form[id$='_donation_form']").offsetHeight+o.offsetHeight+70+"px"),o.style.display="block")}changeDate(){document.getElementById("ecard_send_date").value=document.getElementById("ecard_send_date_year").value+"-"+document.getElementById("ecard_send_date_month").value+"-"+document.getElementById("ecard_send_date_day").value}formatCreditCard(){let e=document.getElementById("card_number");return e.value.length<19&&(e.value=e.value.replace(/\W/gi,"").replace(/(.{4})/g,"$1 "),!0)}openModal(e,t){e.preventDefault();let a=document.createElement("div");a.classList.add("modal-backdrop","fade"),document.getElementById("dfs__modal").append(a),document.querySelector("body").classList.add("dfs-open"),document.getElementById("dfs__modal").querySelector(".modal").style.display="block",setTimeout((function(){document.getElementById("dfs__modal").querySelector(".modal").classList.add("show"),a.classList.add("show")}),200),!0===t&&(this.closeToast(e),sessionStorage.clear())}closeModal(e){if(e.preventDefault(),document.getElementById("dfs__modal").querySelector(".modal").classList.remove("show"),document.getElementById("dfs__modal").querySelector(".modal").style.display="none",document.getElementById("dfs__modal").querySelector(".modal-backdrop").remove(),document.querySelector("body").classList.remove("dfs-open"),"true"===sessionStorage.getItem("DFS_start")){let e=document.querySelector("form[id$='_donation_form']"),t={},a=new FormData(e);document.querySelectorAll("[name='other_amount']").forEach(e=>{""!==e.value&&a.set("other_amount",e.value.replace(/[^0-9.-]+/g,""))});for(let e of a.keys())t[e]=a.get(e);sessionStorage.setItem("DFS_populate",JSON.stringify(t)),setTimeout((function(){document.getElementById("dfs__toast").querySelector(".toast").style.display="block",setTimeout((function(){document.getElementById("dfs__toast").querySelector(".toast").classList.add("show")}),200)}),350)}}closeToast(e){e.preventDefault(),document.getElementById("dfs__toast").querySelector(".toast").classList.remove("show"),document.getElementById("dfs__toast").querySelector(".toast").style.display="none",sessionStorage.clear()}setReminder(){sessionStorage.setItem("DFS_start","true")}}t.default=class{constructor(e){this.config={...o,...e},this.formEvents=_.prototype,this.renderForm=d.prototype,this.prefix=n.prefix,this.initialized=!1,this.pages=n.pages}async init(){if(await async function(){try{return!!(await fetch("https://tylerlemon.com/projects/luminate/whitelist.php",{method:"GET"})).ok}catch(e){return console.error(e),!1}}()){let e=function(e){let t=!0;return""===e.url&&(t=!1,console.error("A URL has not been set. -> "+n.docLink+"#setup")),""===e.apiKey&&(t=!1,console.error("An API Key has not been set. -> "+n.docLink+"#setup")),""===e.formId&&(t=!1,console.error("A form ID has not been set. -> "+n.docLink+"#setup")),t}(this.config),t=document.createElement("form");if(t.id=this.prefix+"_donation_form",e){if(""===this.config.stationaryId&&(this.config.supportsEcard=!1,console.warn("A stationary ID has not been set. eCard has been deactivated -> "+n.docLink+"#ecard")),"modal"===this.config.displayType){(function(e,t){let a=document.createElement("div");if(a.id=e+"_modal",a.innerHTML=n.modal,document.querySelector("body").append(a),""!==t.headline){let e=document.createElement("h2");e.innerHTML=t.headline,a.querySelector(".modal-banner").append(e)}if(""!==t.bodyText){let e=document.createElement("p");e.innerHTML=t.bodyText,a.querySelector(".modal-banner").append(e)}return document.querySelector(t.target)?(document.querySelectorAll(t.target).forEach(e=>{e.addEventListener("click",e=>_.prototype.openModal(e,!1),!1)}),a.querySelector(".btn-close").addEventListener("click",e=>_.prototype.closeModal(e),!1),!0):(console.error("The target element is not on the page. -> "+n.docLink+"#setup"),!1)})(this.prefix,this.config)&&(this.form=document.querySelector("#"+this.prefix+"_modal .modal-body").append(t),this.getFormInfo(t))}else if("inline"===this.config.displayType){(function(e,t){if(document.querySelector(t.container)){let a=document.createElement("div");return a.id=e+"_inline_form",document.querySelector(t.container).append(a),!0}return console.error("The container element is not on the page. -> "+n.docLink+"#setup"),!1})(this.prefix,this.config)&&(this.form=document.querySelector("#"+this.prefix+"_inline_form").append(t),this.getFormInfo(t))}else console.error("A valid display type has not been set. -> "+n.docLink+"#setup");this.config.reminder&&function(e){let t=document.createElement("div");t.id=e+"_toast",t.innerHTML=n.toast,document.querySelector("body").append(t),t.querySelector(".toast-button").addEventListener("click",e=>_.prototype.openModal(e,!0),!1),t.querySelector(".btn-close").addEventListener("click",e=>_.prototype.closeToast(e),!1)}(this.prefix,this.config)}}else console.error("This domain is not authorized to use this plugin.");this.initialized=!0}async getFormInfo(e){let t=document.createElement("div"),a=await async function(e){let t={method:"getDonationFormInfo",api_key:e.apiKey,v:"1.0",response_format:"json",form_id:e.formId};!1===e.url.endsWith("/")&&(e.url=e.url+"/");try{const a=await fetch(e.url+"CRDonationAPI",{method:"POST",body:new URLSearchParams(t)});if(a.ok)return await a.json();{let e=await a.json();return console.error(e.errorResponse.message),!1}}catch(e){return!1}}(this.config),o=document.createElement("div");if(o.id=this.prefix.concat("_","error_container"),e.prepend(o),a){let o=a.getDonationFormInfoResponse.donationFields.donationField,i=a.getDonationFormInfoResponse.donationLevels.donationLevel,l=o.map(e=>this.renderForm.getFieldGroup(this.config,e)),r=this.config.levelSplit,s=r.reduce((e,t)=>Number(e)+Number(t),0);if(i.length!==s&&console.error("Donation levels do not match. -> "+n.docLink+"#levels"),this.config.supportMonthly&&2!==r.length&&console.error("Monthly donation levels are not defined. -> "+n.docLink+"#sustaining"),this.config.supportsTribute&&"false"===a.getDonationFormInfoResponse.supportsTribute&&(console.warn("Configuration mismatch: Tribute deactivated"),this.config.supportsTribute=!1),this.config.supportsEcard&&"false"===a.getDonationFormInfoResponse.supportsEcard&&(console.warn("Configuration mismatch: Ecard deactivated"),this.config.supportsEcard=!1),!this.config.supportsTribute){let e=this.pages.indexOf("tribute");-1!==e&&this.pages.splice(e,1)}if(!this.config.supportsTribute||!this.config.supportsEcard){let e=this.pages.indexOf("ecard");-1!==e&&this.pages.splice(e,1)}if(!this.config.supportDonor){let e=this.pages.indexOf("donor");-1!==e&&this.pages.splice(e,1)}t.id="levels",t.classList.add("row");for(let[t,a]of this.pages.entries()){let n=document.createElement("div");n.id=this.prefix.concat("_",a),n.classList.add("page","page-hidden"),n.setAttribute("data-step",a),n.setAttribute("data-index",t),e.append(n)}document.getElementById(this.prefix.concat("_",this.pages[0])).append(t);let d=this.renderForm.getPaymentGroups(this.config);for(let e of d)this.appendPayment(e);let c=n.buttons,u=document.createElement("div");u.id=this.prefix.concat("_","button_container"),u.classList.add("row","g-0","w-100","justify-content-end");for(let e of c){let t=this.navButtons(e);u.append(t)}if(e.append(u),document.getElementById("nextButton").addEventListener("click",e=>this.formEvents.validateStep(e,this.config),!1),document.getElementById("backButton").addEventListener("click",this.formEvents.prevStep),document.getElementById("submitButton").addEventListener("click",e=>this.formEvents.validateStep(e,this.config),!1),document.getElementById(this.prefix+"_donation_form").addEventListener("submit",e=>this.formEvents.validateStep(e,this.config),!1),this.config.supportMonthly){let e=this.showMonthly(),t=document.createElement("div");t.classList.add("row");for(let a of e)this.config.monthlyFirst?t.prepend(a):t.append(a);document.getElementById(this.prefix.concat("_",this.pages[0])).prepend(t)}document.querySelectorAll("input[name='duration']").forEach(e=>e.addEventListener("click",this.formEvents.changeLevels.bind(this.formEvents))),document.getElementById(this.prefix.concat("_",this.pages[0])).classList.remove("page-hidden"),document.getElementById(this.prefix.concat("_",this.pages[0])).classList.add("active");for(let e of l)this.config.supportsTribute||"tribute"!==e.getAttribute("data-parent")?this.config.supportsEcard||"ecard"!==e.getAttribute("data-parent")?this.config.supportsTribute||!this.config.supportsEcard||"ecard"!==e.getAttribute("data-parent")?(this.config.supportDonor||"donor"!==e.getAttribute("data-parent"))&&"level_id"!==e.firstChild.id&&this.appendField(e):console.error("Tribute is required for eCard support. -> "+n.docLink+"#ecard"):e.classList.value.indexOf("is-required")>-1&&console.error("Ecard fields are required. -> "+n.docLink+"#ecard"):e.classList.value.indexOf("is-required")>-1&&console.error("Tribute fields are required. -> "+n.docLink+"#tribute");let m=i.map((e,t)=>this.renderForm.getLevelGroup(this.config,e,t,s));for(let e of m)this.appendLevel(e);if(document.querySelectorAll("[id^='donation_amount_']").forEach(e=>e.addEventListener("click",this.formEvents.otherAmount.bind(this.formEvents))),document.getElementById("form_id").value=this.config.formId,this.config.reminder&&this.formEvents.setReminder(),this.config.supportsTribute){let e=this.showTribute();document.getElementById(this.prefix.concat("_",this.pages[0])).append(e)}if(this.config.supportsEcard&&(document.querySelectorAll("[type='select'][id^='ecard_send_date_']").forEach(e=>e.addEventListener("change",this.formEvents.changeDate)),document.getElementById("ecard_send_date_year").dispatchEvent(new Event("change"))),!this.config.supportsEcard&&document.getElementById("ecard_send")&&(document.getElementById("ecard_send").parentElement.parentElement.style.display="none"),this.config.supportDonor){let e=this.showSameAs();document.getElementById(this.prefix.concat("_","billing")).append(e)}document.getElementById("card_number").addEventListener("keypress",this.formEvents.formatCreditCard),document.getElementById("card_number").addEventListener("change",this.formEvents.formatCreditCard)}else o.style.display="block",o.innerHTML=u.connection}appendPayment(e){document.getElementById(this.prefix.concat("_","payment")).append(e)}appendField(e){let t=e.getAttribute("data-parent");document.getElementById(this.prefix.concat("_",t)).append(e)}appendLevel(e){document.getElementById("levels").append(e)}navButtons(e){let t=e+"Button",a=document.createElement("button"),n=document.createElement("div");return a.id=t,a.type="submit"==e?"submit":"button","back"===e?a.classList.add("btn","btn-lg","btn-secondary"):a.classList.add("btn","btn-lg","btn-primary"),a.innerText=this.config[t],n.classList.add("col-auto"),n.id=t+"_parent",n.append(a),n}monthlyOptions(e,t){let a=document.createElement("div");a.classList.add("col-6","mb-3");let o=0;return this.config.monthlyFirst&&(o=1),a.innerHTML=e==o?"<input id='give_"+n.duration[e]+"' name='duration' value='"+n.duration[e]+"' type='radio' class='d-none' checked><label for='give_"+n.duration[e]+"' class='btn w-100'>"+t+"</label></div>":"<input id='give_"+n.duration[e]+"' name='duration' value='"+n.duration[e]+"' type='radio' class='d-none'><label for='give_"+n.duration[e]+"' class='btn w-100'>"+t+"</label></div>",a}showMonthly(){return this.config.givingOptions.map((e,t)=>this.monthlyOptions(t,e))}showTribute(){let e=this.config.tributeLabel,t=document.createElement("div");return t.classList.add("form-group"),t.innerHTML="<div class='form-check'><input id='tribute_bool' name='tribute_bool' type='checkbox' class='form-check-input'><label for='tribute_bool' class='form-check-label'>"+e+"</label></div>",t}showSameAs(){let e=this.config.sameAsLabel,t=document.createElement("div");return t.classList.add("form-group"),t.innerHTML="<div class='form-check'><input id='same_as_bool' name='same_as_bool' type='checkbox' class='form-check-input'><label for='same_as_bool' class='form-check-label'>"+e+"</label></div>",t}}}]).default}));
//# sourceMappingURL=bundle.js.map
